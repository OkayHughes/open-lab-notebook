<p>npd---
date: 2023-11-06
tags:</p>
<ul>
<li>posts</li>
<li>misc
eleventyNavigation:
key: bfb transport
parent: Porting DA HOMME to C++
layout: layouts/post.njk</li>
</ul>
<hr>
<h3>Porting changes to transport code</h3>
<p>changes in:</p>
<ul>
<li><code>components/homme/src/share/prim_driver_base.F90</code></li>
<li><code>components/homme/src/share/sl_advection.F90</code></li>
</ul>
<p>Routines that should ideally be tested:</p>
<ul>
<li><code>calc_trajectory</code></li>
<li><code>set_tracer_transport_derived_values</code></li>
<li><code>applyCAMforcing_tracers</code></li>
</ul>
<h1>Getting integration tests working on GL</h1>
<p>The <code>make test</code> tests do compare C++ and F90 executables! However, &quot;make all&quot; fails seemingly on every commit I've tried,
including <code>maint-1.2</code>, <code>maint-2.0</code>, <code>maint-3.0</code>, as well as the original commit that DA HOMME branched from.
Therefore, the subset of executables needed to run the case must be calculated.
From cmake output, we find that the command should be something like</p>
<pre><code>make -j8 swtcA swtcB baroC baroCam baroCam-acc theta-l-nlev20 theta-l-nlev20 preqx-nlev30-interp theta-l-nlev30 tool-nlev26 theta-l-nlev10-native preqx-nlev10-native  theta-l-nlev20-native preqx-nlev10-native-kokkos theta-l-nlev30-kokkos theta-l-nlev20-native-kokkos theta-l-nlev10-native-kokkos preqx-nlev26 preqx-nlev26-kokkos preqx-nlev72 preqx-nlev72-kokkos preqx-nlev72 preqx-nlev72-kokkos theta-nlev128 theta-nlev128-kokkos
</code></pre>
