<!DOCTYPE html>
<html lang="en">
  <head>
    
    
    
    <meta charset="utf-8" />
    <link rel="icon" href="https://cdn.glitch.com/8af1b7af-efae-4a35-b1d7-e47b835582bc%2Fall_TMQ_moist_day5-1.ico?v=1630525741731" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Your new 11ty blog" />
    <link rel="stylesheet" type="text/css" href="/open-lab-notebook/public/style.css" />
    <link rel="stylesheet" type="text/css" href="/open-lab-notebook/public/fonts/cmu.css" />
    <link rel="stylesheet" type="text/css" href="/public/style.css" />
    <link rel="stylesheet" type="text/css" href="/public/fonts/cmu.css" />
 
    <link rel="stylesheet" href="https://unpkg.com/katex@latest/dist/katex.min.css" />
    
    <title>Open Lab Notebook</title>

<meta name="description" content="A blog which serves as my lab notebook, but which is visible to the world because I&apos;m a masochist.">
<meta name="robots" content="index,follow">
<meta name="author" content="undefined">

<link rel="canonical" href="https://undefined.glitch.me/posts/cesm/2022_06_16_gl_cam_install/">

<meta property="og:title" content="Open Lab Notebook">
<meta property="og:type" content="article">

<meta property="og:url" content="https://undefined.glitch.me/posts/cesm/2022_06_16_gl_cam_install/">
<meta property="og:description" content="A blog which serves as my lab notebook, but which is visible to the world because I&apos;m a masochist.">
<meta property="og:image" content="https://cdn.glitch.com/8af1b7af-efae-4a35-b1d7-e47b835582bc%2Fall_TMQ_moist_day5.png?v=1630525127233">

<meta name="twitter:card" content="summary">

<meta name="twitter:url" content="https://undefined.glitch.me/posts/cesm/2022_06_16_gl_cam_install/">
<meta name="twitter:title" content="Open Lab Notebook">
<meta name="twitter:description" content="A blog which serves as my lab notebook, but which is visible to the world because I&apos;m a masochist.">
<meta name="twitter:image" content="https://cdn.glitch.com/8af1b7af-efae-4a35-b1d7-e47b835582bc%2Fall_TMQ_moist_day5.png?v=1630525127233">


  </head>
  <body>
  <main>
    
    
  
    


<div class="wrapper post">
  <div>
    
    <h1 class='postTitle'>CAM devel install on UM GreatLakes system</h1>

    
    
    
    <h2>Step 1: Subversion is messed up on greatlakes</h2>
<p>The subversion certificate authority permissions are too strict for silent
<code>checkout_externals</code> to run successfully.</p>
<pre><code>git clone https://github.com/ESCOMP/CAM ${HOME}/CAM_DEVEL
cd ${HOME}/CAM_DEVEL
git checkout cam_development
yes t | ./manage_externals/checkout_externals

</code></pre>
<h2>installing missing ESMF dependency</h2>
<p>The fastest way to do this is to run</p>
<pre><code>rsync --progress -r /home/owhughes/esmf ${HOME}/esmf
</code></pre>
<p>But if you want to do it from source, then use the following:</p>
<pre><code>mkdir ${HOME}/esmf \
  &amp;&amp; cd ${HOME}/esmf

wget https://github.com/esmf-org/esmf/archive/refs/tags/v8.3.0.tar.gz \
  &amp;&amp; tar -xf v8.3.0.tar.gz \
  &amp;&amp; cd esmf-8.3.0

cat &lt;&lt; HERE &gt; build.sh
module load intel/18.0.5
module load openmpi/3.1.4
export ESMF_DIR=`pwd`
export ESMF_LIB=`pwd`
export ESMF_CXX=mpicxx
export ESMF_COMM=openmpi
export ESMF_COMPILER=intel
export ESMF_F90=mpif90
make -j4
HERE

bash build.sh
</code></pre>
<p>This will take a while to run (&gt; 5 minutes?).</p>
<h2>Copying machine files</h2>
<p>Run</p>
<pre><code>cp -rv  /home/owhughes/.cime ${HOME}/.cime
</code></pre>
<p>This copies over machine configuration files that are specific to
our Greatlakes machine.</p>
<h2>creating a case</h2>
<p>Run the following code:</p>
<pre><code>mkdir -p ${HOME}/make_cases \
  &amp;&amp; cd ${HOME}/make_cases \
  &amp;&amp; wget https://open-lab-notebook.glitch.me/public/scripts/case_creation_script_june.sh \
  &amp;&amp; mkdir -p ${HOME}/cesm_cases \
  &amp;&amp; bash case_creation_script_june.sh
</code></pre>
<p>If this runs correctly, it will create a JW06 (one of the test cases)
case directory located at <code>${HOME}/cesm_cases/CAM_DEVEL/test_cases/CAM_DEVEL.ne30_ne30_mg17.FADIAB.36.test_cases.jw06</code></p>
<p>In order to build and run this case do</p>
<pre><code>cd ${HOME}/cesm_cases/CAM_DEVEL/test_cases/CAM_DEVEL.ne30_ne30_mg17.FADIAB.36.test_cases.jw06 \
  &amp;&amp; (source bash.source &amp;&amp; bash xml_config_helper.sh) \
  &amp;&amp; (source bash.source &amp;&amp; ./case.build) \
  &amp;&amp; (source bash.source &amp;&amp; ./case.submit)
</code></pre>

    <div class="controls">

    
      
          <h3>
            Parent post:
      </h3>
          <ul><li><a href="/posts/cesm/cesm-parent/">Community Earth System Model lifehacks</a></li></ul>
      
      
      
      
      
    </div>
  </div>
</div>

      <footer class="footer">
        <div class="links">
          <a href="/">Home</a>
          <span class="divider">|</span>
          <a href="/posts">Posts</a>
          <span class="divider">|</span>
          <a href="/about">About</a>
        </div>
        <a class="btn--remix" target="_top" href="https://glitch.com/edit/#!/remix/glitch-hello-eleventy">
        <img src="https://cdn.glitch.com/605e2a51-d45f-4d87-a285-9410ad350515%2FLogo_Color.svg?v=1618199565140" alt="" /> 
        Remix on Glitch
        </a>
        <a class="btn--remix" target="_top" href="https://glitch.com/edit/#!/open-lab-notebook">
        Edit
        </a>
      </footer>
    
  </main>
   
  </body>
</html>
